{"version":3,"file":"price.stories.1f93cc4f.js","sources":["../../src/utils/money.ts","../../src/components/molecules/price.client.tsx"],"sourcesContent":["import {Scalars} from '@shopify/hydrogen/storefront-api-types';\n\nexport function calculatePercentageOff(\n  actual?: Scalars['Decimal'],\n  full?: Scalars['Decimal'],\n) {\n  if (!actual || !full) return;\n  return Math.round(100 - (parseFloat(actual) / parseFloat(full)) * 100);\n}\n","import {useEffect, useState} from 'react';\nimport {CurrencyCode, Scalars} from '@shopify/hydrogen/storefront-api-types';\n\nimport {Pill} from '~/components/atoms/pill';\nimport {calculatePercentageOff} from '~/utils/money';\n\ninterface Props {\n  actual?: Scalars['Decimal'];\n  full?: Scalars['Decimal'];\n  code?: CurrencyCode;\n}\n\nexport function Price({actual, full, code}: Props) {\n  const [prefix, setPrefix] = useState<string | null>(null);\n  const discount = calculatePercentageOff(actual, full);\n\n  useEffect(() => {\n    if (code) {\n      setPrefix(\n        Number()\n          ?.toLocaleString(undefined, {\n            style: 'currency',\n            currency: code,\n          })\n          ?.replace('0.00', '') ?? null,\n      );\n    }\n  }, [code]);\n\n  return (\n    <div className=\"flex flex-row items-center flex-wrap\">\n      {prefix ? (\n        <p className=\"text-gray-600 contrast-more:text-black mr-1\">{prefix}</p>\n      ) : null}\n      {discount && discount > 0 ? (\n        <>\n          <p className=\"font-body leading-inline text-gray-400 contrast-more:text-black line-through mr-1\">\n            {full}\n          </p>\n          <p className=\"font-body leading-inline text-red-600 contrast-more:text-red-900 mr-1\">\n            {actual}\n          </p>\n          <Pill variant=\"sale\" className=\"mr-1\">\n            {discount}% off\n          </Pill>\n        </>\n      ) : (\n        <p className=\"font-body leading-inline text-gray-600\">{actual}</p>\n      )}\n    </div>\n  );\n}\n"],"names":["calculatePercentageOff","actual","full","Price","prefix","setPrefix","useState","discount","useEffect","code","_jsxs","_jsx"],"mappings":"oQAEgB,SAAAA,EACdC,EACAC,EACA,CACI,GAAA,GAACD,GAAU,CAACC,GACT,OAAA,KAAK,MAAM,IAAO,WAAWD,CAAM,EAAI,WAAWC,CAAI,EAAK,GAAG,CACvE,CCIO,SAAAC,EAAA,CAAe,OAAAF,EAACA,KAAAA,EAAQC,KAAAA,CAAT,EAAA,CACpB,KAAA,CAAAE,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAA,IAAA,EACAC,EAAAP,EAAAC,EAAAC,CAAA,EAEAM,OAAAA,EAAAA,QAAAA,UAAAA,IAAAA,WACEC,GACEJ,GAAAA,GAAAA,GAAAA,EAAAA,OAAAA,IAAAA,YAAAA,EAAAA,eAAAA,OAAAA,CAEgC,MAAA,WACnB,SAAAI,CACGA,KAJhBJ,YAAAA,EAIgBI,QAAAA,OAAAA,MAJhBJ,KAAAA,EAIgBI,IAAAA,CAIjB,EAAA,CAAAA,CAAA,CAAA,EAGHC,EAAA,MAAA,CACE,UAAA,uCAAe,SAAA,CAAAN,EAAAO,EAAA,IAAA,CAEX,UAAA,8CAAa,SAAAP,CAA+CA,CAAAA,EAAAA,KAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,CAG5D,SAAA,CAAAO,EAAA,IAAA,CACE,UAAA,oFAAa,SAAAT,CACVA,CAAAA,EAAAA,EAAAA,IAAAA,CAEH,UAAA,wEAAa,SAAAD,CACVA,CAAAA,EAAAA,EAAAA,EAAAA,CAEH,QAAA,OAAc,UAAA,OAAiB,SAAA,CAAAM,EAAA,OAAA,CAA/B,CAAA,CAAA,CAPF,CAAA,EAAAI,EAAA,IAAA,CAYA,UAAA,yCAAa,SAAAV,CAA0CA,CAAAA,CAAAA,CAjB3D,CAAA,CAqBH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}