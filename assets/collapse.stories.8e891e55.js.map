{"version":3,"file":"collapse.stories.8e891e55.js","sources":["../../src/components/molecules/collapse.client.tsx"],"sourcesContent":["import {\n  ComponentProps,\n  createContext,\n  MouseEventHandler,\n  ReactNode,\n  useCallback,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {Show} from '~/components/atoms/show';\nimport {createContextHook} from '~/hooks/create-context-hook';\n\ninterface ContextValue {\n  isOpen: boolean;\n  toggle: () => void;\n}\n\nconst initialValue: ContextValue = {\n  isOpen: false,\n  toggle: () => {},\n};\n\nconst CollapseContext = createContext(initialValue);\nconst CollapseProvider = CollapseContext.Provider;\nconst useCollapse = createContextHook({CollapseContext});\n\ninterface PropsRoot {\n  children?: ReactNode;\n}\n\nexport function CollapseRoot({children}: PropsRoot) {\n  const {isOpen: _isOpen} = initialValue;\n  const [isOpen, setIsOpen] = useState<ContextValue['isOpen']>(_isOpen);\n\n  const toggle = useCallback(() => {\n    setIsOpen((prevState) => !prevState);\n  }, [setIsOpen]);\n\n  const value: ContextValue = {\n    isOpen,\n    toggle,\n  };\n\n  return <CollapseProvider value={value}>{children}</CollapseProvider>;\n}\n\ninterface PropsOnOpen {\n  children?: ReactNode;\n}\n\nexport function CollapseOnOpen({children}: PropsOnOpen) {\n  const {isOpen} = useCollapse();\n  return <Show on={isOpen}>{children}</Show>;\n}\n\ninterface PropsOnClosed {\n  children?: ReactNode;\n}\n\nexport function CollapseOnClosed({children}: PropsOnClosed) {\n  const {isOpen} = useCollapse();\n  return <Show on={!isOpen}>{children}</Show>;\n}\n\ninterface PropsTrigger extends ComponentProps<'button'> {}\n\nexport function CollapseTrigger({onClick, ...props}: PropsTrigger) {\n  const {toggle} = useCollapse();\n\n  const handleOnClick: MouseEventHandler<HTMLButtonElement> = (event) => {\n    if (onClick) onClick(event);\n    toggle();\n  };\n\n  return <button onClick={handleOnClick} {...props} />;\n}\n\ninterface PropsBody extends ComponentProps<'div'> {}\n\nexport function CollapseBody({children, className, ...props}: PropsBody) {\n  const {isOpen} = useCollapse();\n  return (\n    <div\n      className={clsx(\n        'relative transition-all overflow-hidden',\n        // TODO: use transition height to allow value to actually animate\n        isOpen && 'max-h-auto',\n        !isOpen && 'max-h-24',\n        className,\n      )}\n      {...props}\n    >\n      <div\n        className={clsx(\n          'absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-b from-white/0 to-white/100 z-20',\n          isOpen && 'opacity-0',\n          !isOpen && 'opacity-1',\n        )}\n      />\n      {children}\n    </div>\n  );\n}\n"],"names":["initialValue","CollapseContext","createContext","CollapseProvider","useCollapse","createContextHook","CollapseRoot","children","_isOpen","isOpen","setIsOpen","useState","toggle","useCallback","_jsx","CollapseOnOpen","Show","CollapseOnClosed","CollapseTrigger","onClick","event","handleOnClick","props","CollapseBody","className","_jsxs","clsx"],"mappings":"mOAiBA,MAAAA,EAAA,CAAmC,OAAA,GACzB,OAAA,IAAA,CACM,CAFmB,EAKnCC,EAAAC,EAAAA,QAAAA,cAAAF,CAAA,EACAG,EAAAF,EAAA,SACAG,EAAAC,EAAA,CAAsC,gBAAAJ,CAAA,CAAA,EAM/B,SAAAK,EAAA,CAAsB,SAAAC,CAAA,EAAA,CAC3B,KAAA,CAAM,OAAAC,CAASA,EAAAA,EACf,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAAH,CAAA,EAEAI,EAAAC,EAAAA,QAAAA,YAAA,IAAA,CACEH,EAAAA,GAAAA,CAAAA,CAAAA,CAAS,EAAA,CAAAA,CAAA,CAAA,EAQX,OAAAI,EAAAX,EAAA,CAAO,MALP,CAA4B,OAAAM,EAC1BA,OAAAA,CACAG,EAGuB,SAAAL,CAAlB,CAAA,CACR,CAMM,SAAAQ,EAAA,CAAwB,SAAAR,CAAA,EAAA,CAC7B,KAAA,CAAM,OAAAE,CAACA,EAAAA,EAAAA,EACP,OAAAK,EAAAE,EAAA,CAAO,GAAAP,EAAUA,SAAAA,CAAV,CAAA,CACR,CAMM,SAAAQ,EAAA,CAA0B,SAAAV,CAAA,EAAA,CAC/B,KAAA,CAAM,OAAAE,CAACA,EAAAA,EAAAA,EACP,OAAAK,EAAAE,EAAA,CAAO,GAAA,CAAAP,EAAWA,SAAAA,CAAX,CAAA,CACR,CAIM,SAAAS,EAAA,CAAyB,QAAAC,KAACA,CAAD,EAAA,CAC9B,KAAA,CAAM,OAAAP,CAACA,EAAAA,EAAAA,EAOP,OAAAE,EAAA,SAAA,CAAO,QALPM,GAAA,CACED,GAAaA,EAAAA,CAAAA,EACbP,GAAM,EAGgBS,GAAAA,CAAmBC,CAAAA,CAC5C,CAIM,SAAAC,EAAA,CAAsB,SAAAhB,EAACA,UAAAA,KAAUiB,CAAX,EAAA,CAC3B,KAAA,CAAM,OAAAf,CAACA,EAAAA,EAAAA,EACP,OAAAgB,EAAA,MAAA,CACE,UAAAC,EACaA,0CACTjB,GAAA,aAEU,CAAAA,GAAA,WACCe,CACXA,EALa,GAAAF,EAOXA,SAAAA,CAAAA,EAAAA,MAAAA,CAEJ,UAAAI,EAAA,uFAAAjB,GAAA,YAAA,CAAAA,GAAA,WAAA,CACiB,CAAA,EAAAF,CAAA,CAXnB,CAAA,CAoBH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}